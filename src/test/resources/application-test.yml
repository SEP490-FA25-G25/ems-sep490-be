spring:
  application:
    name: tms-sep490-be

  # Testcontainers will provide database configuration via @DynamicPropertySource
  # No hardcoded database configuration - conflicts with Testcontainers

  jpa:
    hibernate:
      ddl-auto: create-drop  # Recreate schema for each test run
    show-sql: false  # Reduce test log noise, enable for debugging
    properties:
      hibernate:
        format_sql: true
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true

  sql:
    init:
      mode: never  # Don't run schema.sql in tests, let Hibernate create schema

  # JWT Configuration for tests (must match main application structure)
  security:
    jwt:
      secret: test-secret-key-for-testing-purposes-only-at-least-256-bits-long
      access-token-expiration: 900000      # 15 minutes
      refresh-token-expiration: 604800000  # 7 days

# Logging optimized for test performance
logging:
  level:
    org.fyp.tmssep490be: INFO  # Reduced from DEBUG for performance
    org.hibernate.SQL: WARN    # Reduced from DEBUG for performance
    org.hibernate.type.descriptor.sql.BasicBinder: WARN
    org.testcontainers: INFO
    com.github.dockerjava: WARN
    org.springframework.web: WARN
    org.springframework.security: WARN

# Security configuration for tests
# Security is ENABLED by default - use @WithMockUser for specific tests
# spring.security.enabled property has been removed as it's deprecated

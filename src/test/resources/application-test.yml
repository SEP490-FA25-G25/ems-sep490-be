spring:
  application:
    name: tms-sep490-be

  datasource:
    # Connect to local PostgreSQL database for integration tests
    url: jdbc:postgresql://localhost:5432/tms
    username: postgres
    password: 979712
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: create-drop  # Recreate schema for each test run
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true

  sql:
    init:
      mode: never  # Don't run schema.sql in tests, let Hibernate create schema

  # JWT Configuration for tests (must match main application structure)
  security:
    jwt:
      secret: test-secret-key-for-testing-purposes-only-at-least-256-bits-long
      access-token-expiration: 900000      # 15 minutes
      refresh-token-expiration: 604800000  # 7 days

# Logging
logging:
  level:
    org.fyp.tmssep490be: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    org.testcontainers: INFO
    com.github.dockerjava: WARN

# Disable security for easier testing (override in specific tests if needed)
spring.security.enabled: false
